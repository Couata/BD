USE group7

CREATE OR REPLACE VIEW view_horaires_details AS
SELECT 
    HORRAIRE.HEURE_ARRIVEE,
    HORRAIRE.HEURE_DEPART,
    ARRET.NOM AS NOM_ARRET,
    ITINERAIRE.NOM AS NOM_ITINERAIRE,
    DIRECTION,
    AGENCE.NOM AS NOM_AGENCE,
    SERVICE.NOM AS NOM_SERVICE
FROM HORRAIRE
JOIN ARRET ON HORRAIRE.ARRET_ID = ARRET.ID
JOIN TRAJET ON HORRAIRE.TRAJET_ID = TRAJET.TRAJET_ID
JOIN ITINERAIRE ON TRAJET.ITINERAIRE_ID = ITINERAIRE.ID
JOIN AGENCE ON ITINERAIRE.AGENCE_ID = AGENCE.ID
JOIN SERVICE ON TRAJET.SERVICE_ID = SERVICE.ID;


CREATE OR REPLACE VIEW view_exceptions_details AS
SELECT 
    EXCEPTION.CODE,
    SERVICE.NOM AS NOM_SERVICE,
    ITINERAIRE.NOM AS NOM_ITINERAIRE,
    EXCEPTION.DATE_DEBUT,
    EXCEPTION.DATE_FIN
FROM EXCEPTION
JOIN SERVICE ON EXCEPTION.SERVICE_ID = SERVICE.ID
JOIN TRAJET ON SERVICE.ID = TRAJET.SERVICE_ID
JOIN ITINERAIRE ON TRAJET.ITINERAIRE_ID = ITINERAIRE.ID;
